{% extends "example/base.html" %}
{% block content %}
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <h1 class="mb-4">Navbar Widgets Demo</h1>
        <div class="alert alert-info">
          <h5>
            <i class="bi bi-info-circle"></i> Demo Instructions
          </h5>
          <p>Look at the top navbar (header) to see the following widgets in action:</p>
          <ul>
            <li>
              <strong>Fullscreen Widget</strong> - Toggle fullscreen mode
            </li>
            <li>
              <strong>Theme Switcher Widget</strong> - Switch between light/dark/auto themes
            </li>
            <li>
              <strong>Messages Widget</strong> - Envelope icon with unread messages count
            </li>
            <li>
              <strong>Notifications Widget</strong> - Bell icon with unread notifications count
            </li>
            <li>
              <strong>User Profile Widget</strong> - Profile with avatar/initials and dropdown menu
            </li>
          </ul>
        </div>
        {# Row 1: Fullscreen and Theme Switcher #}
        <div class="row mt-5">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Fullscreen Widget</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Features:</strong>
                </p>
                <ul>
                  <li>Toggle fullscreen mode using browser Fullscreen API</li>
                  <li>Cross-browser support (standard + vendor prefixes)</li>
                  <li>Auto-hides if browser doesn't support fullscreen</li>
                  <li>Icon changes based on state (expand/collapse)</li>
                  <li>ESC key to exit fullscreen (browser default)</li>
                </ul>
                <p>
                  <strong>Usage:</strong>
                </p>
                <pre class="p-2"><code>&lt;c-navbar/fullscreen_widget /&gt;</code></pre>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Theme Switcher Widget</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Features:</strong>
                </p>
                <ul>
                  <li>Three modes: Light, Dark, Auto (system preference)</li>
                  <li>Persists choice in localStorage</li>
                  <li>Auto mode listens to system theme changes</li>
                  <li>Smooth transitions between themes</li>
                  <li>Accessible with ARIA labels</li>
                </ul>
                <p>
                  <strong>Usage:</strong>
                </p>
                <pre class="p-2"><code>&lt;c-navbar/theme_switcher /&gt;</code></pre>
              </div>
            </div>
          </div>
        </div>
        {# Row 2: Messages and Notifications #}
        <div class="row mt-4">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Messages Widget</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Features:</strong>
                </p>
                <ul>
                  <li>Badge counter with unread messages (hides when 0, "99+" when > 99)</li>
                  <li>Sender avatars with initials fallback</li>
                  <li>Message preview (truncated at 50 chars)</li>
                  <li>Scrolling dropdown for 5+ messages</li>
                  <li>"See All Messages" footer link</li>
                </ul>
                <p>
                  <strong>Usage:</strong>
                </p>
                <pre class="p-2"><code>&lt;c-navbar/widgets/messages
  count="{{ messages_count }}"
  messages="{{ messages }}"
/&gt;</code></pre>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Notifications Widget</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Features:</strong>
                </p>
                <ul>
                  <li>Badge counter (hides when 0, shows "99+" when > 99)</li>
                  <li>Custom badge colors (danger, warning, info)</li>
                  <li>Dropdown with scrolling (max 5 items visible)</li>
                  <li>Bell icon with ARIA labels</li>
                  <li>"See All Notifications" footer link</li>
                </ul>
                <p>
                  <strong>Usage:</strong>
                </p>
                <pre class="p-2"><code>&lt;c-navbar/widgets/notifications
  count="{{ notifications_count }}"
  notifications="{{ notifications }}"
/&gt;</code></pre>
              </div>
            </div>
          </div>
        </div>
        {# Row 3: User Profile and Custom Widget #}
        <div class="row mt-4">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">User Profile Widget</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Features:</strong>
                </p>
                <ul>
                  <li>User avatar or initials fallback</li>
                  <li>Responsive (name hidden on mobile)</li>
                  <li>Dropdown with header, body slot, footer</li>
                  <li>Accessibility support (ARIA labels)</li>
                  <li>Customizable menu items via slots</li>
                </ul>
                <p>
                  <strong>Usage:</strong>
                </p>
                <pre class="p-2"><code>&lt;c-navbar/user_widget
  user="{{ request.user }}"
  avatar_url="{{ user_avatar }}"
  member_since="{{ user_member_since }}"
/&gt;</code></pre>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Custom Widgets</h3>
              </div>
              <div class="card-body">
                <p>
                  <strong>Create Your Own:</strong>
                </p>
                <p>
                  Use the <code>custom_widget</code> component to create application-specific widgets like tasks, shopping cart, alerts, etc.
                </p>
                <p>
                  <strong>Example:</strong>
                </p>
                <pre class="p-2"><code>{% verbatim %}&lt;c-navbar/custom_widget
  icon="check2-square"
  dropdown_id="tasks-dropdown"
  badge_count="{{ tasks_count }}"
  badge_color="danger"&gt;
  &lt;c-slot name="children"&gt;
    {% for task in tasks %}
      &lt;a href="#" class="dropdown-item"&gt;
        {{ task.title }}
      &lt;/a&gt;
    {% endfor %}
  &lt;/c-slot&gt;
&lt;/c-navbar/custom_widget&gt;{% endverbatim %}</code></pre>
                <p class="mt-3">
                  See the Custom Navbar Widgets Tutorial (docs/custom-navbar-widgets.md) for detailed examples including tasks, alerts, and shopping cart widgets.
                </p>
              </div>
            </div>
          </div>
        </div>
        {# Integration Example #}
        <div class="row mt-4">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Integration Example</h3>
              </div>
              <div class="card-body">
                <p>
                  To add widgets to your navbar, pass them to the <code>right</code> slot of <code>&lt;c-app.header&gt;</code>:
                </p>
                <pre class="p-3"><code>{% verbatim %}{% extends "mvp/base.html" %}
{% block app %}
  &lt;c-app fixed_sidebar&gt;
    &lt;c-app.header&gt;
      &lt;c-slot name="right"&gt;
        {# Fullscreen Toggle #}
        &lt;c-navbar/fullscreen_widget /&gt;

        {# Theme Switcher #}
        &lt;c-navbar/theme_switcher /&gt;

        {# Messages #}
        &lt;c-navbar/widgets/messages
          count="{{ messages_count }}"
          messages="{{ messages }}" /&gt;

        {# Notifications #}
        &lt;c-navbar/widgets/notifications
          count="{{ notifications_count }}"
          notifications="{{ notifications }}" /&gt;

        {# User Profile #}
        &lt;c-navbar/user_widget
          user="{{ request.user }}"
          avatar_url="{{ user_avatar }}"
          member_since="{{ user_member_since }}" /&gt;
      &lt;/c-slot&gt;
    &lt;/c-app.header&gt;
    &lt;c-app.sidebar /&gt;
    &lt;c-app.main&gt;
      {% block content %}{% endblock %}
    &lt;/c-app.main&gt;
    &lt;c-app.footer /&gt;
  &lt;/c-app&gt;
{% endblock %}{% endverbatim %}</code></pre>
              </div>
            </div>
          </div>
        </div>
        {# Documentation Links #}
        <div class="row mt-4 mb-5">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Documentation</h3>
              </div>
              <div class="card-body">
                <ul>
                  <li>
                    <strong>Navbar Widgets Reference:</strong> Detailed API docs for all built-in widgets
                  </li>
                  <li>
                    <strong>Custom Navbar Widgets Tutorial:</strong> Step-by-step guide to creating custom widgets with 3 complete examples
                  </li>
                  <li>
                    <strong>Accessibility Guide:</strong> Keyboard navigation, screen reader support, ARIA labels
                  </li>
                  <li>
                    <strong>Troubleshooting:</strong> Common issues and solutions
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
