{% load cotton %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1" />
    <title>{{ page_title }} | Django MVP</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta2/dist/css/adminlte.min.css" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      .demo-controls {
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 1050;
        min-width: 300px;
        max-height: 80vh;
        overflow-y: auto;
      }

      .demo-controls h5 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #495057;
      }

      .demo-controls .form-group {
        margin-bottom: 10px;
      }

      .demo-controls label {
        font-weight: 500;
        margin-bottom: 5px;
        display: block;
      }

      .demo-controls .form-check-label {
        display: inline;
        font-weight: normal;
      }
    </style>
  </head>
  <c-app {% if layout_config.fixed_sidebar %}fixed_sidebar{% endif %}
         {% if layout_config.fixed_header %}fixed_header{% endif %}
         {% if layout_config.fixed_footer %}fixed_footer{% endif %}
         {% if layout_config.sidebar_collapsible %}sidebar_collapsible{% endif %}
         {% if layout_config.collapsed %}collapsed{% endif %}
         sidebar_expand="{{ layout_config.sidebar_expand }}">
    <!-- Demo Controls Panel -->
    <div class="demo-controls">
      <h5>
        <i class="fas fa-cog"></i> Layout Configuration
      </h5>
      <form method="GET" action="/layout/">
        <div class="form-group">
          <label>Fixed Elements:</label>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   name="fixed_sidebar"
                   {% if layout_config.fixed_sidebar %}checked{% endif %} />
            <label class="form-check-label" for="fixed_sidebar">Fixed Sidebar</label>
          </div>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   name="fixed_header"
                   {% if layout_config.fixed_header %}checked{% endif %} />
            <label class="form-check-label" for="fixed_header">Fixed Header</label>
          </div>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   name="fixed_footer"
                   {% if layout_config.fixed_footer %}checked{% endif %} />
            <label class="form-check-label" for="fixed_footer">Fixed Footer</label>
          </div>
        </div>
        <div class="form-group">
          <label>Sidebar Options:</label>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   name="sidebar_collapsible"
                   {% if layout_config.sidebar_collapsible %}checked{% endif %} />
            <label class="form-check-label"
                   for="sidebar_collapsible">Collapsible Sidebar</label>
          </div>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   name="collapsed"
                   {% if layout_config.collapsed %}checked{% endif %} />
            <label class="form-check-label" for="collapsed">Start Collapsed</label>
          </div>
        </div>
        <div class="form-group">
          <label for="sidebar_expand">Sidebar Expand Breakpoint:</label>
          <select name="sidebar_expand"
                  class="form-select form-control">
            {% for breakpoint in valid_breakpoints %}
              <option value="{{ breakpoint }}"
                      {% if layout_config.sidebar_expand == breakpoint %}selected{% endif %}>
                {{ breakpoint|upper }} ({{ breakpoint|title }})
              </option>
            {% endfor %}
          </select>
        </div>
        <button type="submit" class="btn btn-primary btn-sm">
          <i class="fas fa-sync"></i> Apply Layout
        </button>
      </form>
      <hr />
      <div class="text-muted small">
        <strong>Current URL:</strong>
        <br />
        <code>{{ request.get_full_path }}</code>
      </div>
    </div>
    <!-- App Header -->
    <nav class="app-header navbar navbar-expand bg-body">
      <div class="container-fluid">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link"
               data-lte-toggle="sidebar"
               href="#"
               role="button">
              <i class="bi bi-list"></i>
            </a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <span class="navbar-text">
              <i class="fas fa-palette"></i> Layout Demo
            </span>
          </li>
        </ul>
      </div>
    </nav>
    <!-- App Sidebar -->
    <aside class="app-sidebar bg-body-secondary shadow"
           data-bs-theme="dark">
      <div class="sidebar-brand">
        <a href="/layout/" class="brand-link">
          <i class="fas fa-cube brand-image"></i>
          <span class="brand-text fw-light">Django MVP</span>
        </a>
      </div>
      <div class="sidebar-wrapper">
        <nav class="mt-2">
          <ul class="nav sidebar-menu flex-column"
              data-lte-toggle="treeview"
              role="menu"
              data-accordion="false">
            <li class="nav-item">
              <a href="#" class="nav-link active">
                <i class="nav-icon fas fa-palette"></i>
                <p>Layout Demo</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-desktop"></i>
                <p>Fixed Sidebar</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-window-maximize"></i>
                <p>Fixed Header</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-window-minimize"></i>
                <p>Fixed Footer</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-compress"></i>
                <p>Collapsible</p>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </aside>
    <!-- App Main -->
    <main class="app-main">
      <div class="app-content-header">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-6">
              <h3 class="mb-0">{{ page_title }}</h3>
            </div>
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-end">
                <li class="breadcrumb-item">
                  <a href="#">Home</a>
                </li>
                <li class="breadcrumb-item active">{{ breadcrumb }}</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
      <div class="app-content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-info-circle"></i>
                    Layout Configuration Testing
                  </h3>
                </div>
                <div class="card-body">
                  <h5>Current Layout Configuration:</h5>
                  <ul>
                    <li>
                      <strong>Fixed Sidebar:</strong> {{ layout_config.fixed_sidebar|yesno:"Enabled,Disabled" }}
                    </li>
                    <li>
                      <strong>Fixed Header:</strong> {{ layout_config.fixed_header|yesno:"Enabled,Disabled" }}
                    </li>
                    <li>
                      <strong>Fixed Footer:</strong> {{ layout_config.fixed_footer|yesno:"Enabled,Disabled" }}
                    </li>
                    <li>
                      <strong>Sidebar Collapsible:</strong> {{ layout_config.sidebar_collapsible|yesno:"Enabled,Disabled" }}
                    </li>
                    <li>
                      <strong>Sidebar Collapsed:</strong> {{ layout_config.collapsed|yesno:"Enabled,Disabled" }}
                    </li>
                    <li>
                      <strong>Sidebar Expand Breakpoint:</strong> {{ layout_config.sidebar_expand|upper }}
                    </li>
                  </ul>
                  <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i>
                    <strong>How to use:</strong> Use the configuration panel on the right to toggle different layout options.
                    The URL will update with query parameters, and you can bookmark specific layouts for testing.
                  </div>
                  <h5>CSS Classes Applied to Body:</h5>
                  <p>The following CSS classes are automatically applied based on your configuration:</p>
                  <code class="bg-light p-2 d-block">
                    body.bg-body-tertiary
                    {% if layout_config.fixed_sidebar %}.layout-fixed{% endif %}
                    {% if layout_config.fixed_header %}.fixed-header{% endif %}
                    {% if layout_config.fixed_footer %}.fixed-footer{% endif %}
                    {% if layout_config.sidebar_collapsible %}.sidebar-mini{% endif %}
                    {% if layout_config.collapsed %}.sidebar-collapse{% endif %}
                    .sidebar-expand-{{ layout_config.sidebar_expand }}
                  </code>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-code"></i>
                    Usage Example
                  </h3>
                </div>
                <div class="card-body">
                  <p>To use this layout in your templates:</p>
                  <pre><code>{% templatetag openblock %} load cotton {% templatetag closeblock %}
&lt;c-app{% if layout_config.fixed_sidebar %} fixed_sidebar{% endif %}{% if layout_config.fixed_header %} fixed_header{% endif %}{% if layout_config.fixed_footer %} fixed_footer{% endif %}{% if layout_config.sidebar_collapsible %} sidebar_collapsible{% endif %}{% if layout_config.collapsed %} collapsed{% endif %} sidebar_expand="{{ layout_config.sidebar_expand }}"&gt;
    {% templatetag openblock %} block content {% templatetag closeblock %}{% templatetag openblock %} endblock {% templatetag closeblock %}
&lt;/c-app&gt;</code></pre>
                </div>
              </div>
              <div class="card mt-3">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-link"></i>
                    Direct Links
                  </h3>
                </div>
                <div class="card-body">
                  <p>Quick access to common layouts:</p>
                  <div class="list-group">
                    <a href="/layout/"
                       class="list-group-item list-group-item-action">Default Layout</a>
                    <a href="/layout/?fixed_sidebar=on"
                       class="list-group-item list-group-item-action">Fixed Sidebar Only</a>
                    <a href="/layout/?fixed_sidebar=on&fixed_header=on"
                       class="list-group-item list-group-item-action">Dashboard Layout</a>
                    <a href="/layout/?fixed_sidebar=on&fixed_header=on&fixed_footer=on"
                       class="list-group-item list-group-item-action">Complete Fixed Layout</a>
                    <a href="/layout/?sidebar_collapsible=on&collapsed=on"
                       class="list-group-item list-group-item-action">Collapsed Sidebar</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- App Footer -->
    <footer class="app-footer">
      <div class="float-end d-none d-sm-inline">Django MVP Layout Demo</div>
      <strong>Copyright &copy; 2024 Django MVP.</strong> All rights reserved.
    </footer>
  </c-app>
  <script src="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta2/dist/js/adminlte.min.js"></script>
</html>
