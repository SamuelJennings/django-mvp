/// Grid Layout Generator for Django MVP
/// Generates CSS grid-template-areas from combination codes
/// Supports all layout variations dynamically

// Define possible combinations for each row
$top-combinations: "lhr", "lhh", "hhr", "hhh";
$middle-combinations: "lpr", "lpp", "ppr";
$bottom-combinations: "lfr", "lff", "ffr", "fff";

// Maps abbreviations to full grid area names
$area-map: (
  "l": "left",
  "h": "header",
  "p": "page",
  "f": "footer",
  "r": "right",
);

// Convert a three-letter code to grid-template-areas string
@function code-to-areas($code) {
  $result: "";
  @for $i from 1 through str-length($code) {
    $letter: str-slice($code, $i, $i);
    $area: map-get($area-map, $letter);
    @if $result != "" {
      $result: $result + " " + $area;
    } @else {
      $result: $area;
    }
  }
  @return $result;
}

// Parse combination string and generate grid areas
@function generate-grid-areas($combination) {
  // Find positions of dashes
  $first-dash: str-index($combination, "-");
  $remaining: str-slice($combination, $first-dash + 1);
  $second-dash: str-index($remaining, "-");

  // Extract parts
  $top: str-slice($combination, 1, $first-dash - 1);
  $middle: str-slice($remaining, 1, $second-dash - 1);
  $bottom: str-slice($remaining, $second-dash + 1);

  // Convert to grid areas
  $top-areas: code-to-areas($top);
  $middle-areas: code-to-areas($middle);
  $bottom-areas: code-to-areas($bottom);

  @return "#{$top-areas}" "#{$middle-areas}" "#{$bottom-areas}";
}

// Generate all possible combinations and create CSS rules
@mixin generate-all-grid-layouts($selector: "layout") {
  @each $top in $top-combinations {
    @each $middle in $middle-combinations {
      @each $bottom in $bottom-combinations {
        $combo: $top + "-" + $middle + "-" + $bottom;
        .#{$selector}.#{$combo} {
          grid-template-areas: generate-grid-areas($combo);
        }
      }
    }
  }
}

// Alternative: Generate combinations as a list (for custom processing)
@function get-all-combinations() {
  $combinations: ();
  @each $top in $top-combinations {
    @each $middle in $middle-combinations {
      @each $bottom in $bottom-combinations {
        $combo: $top + "-" + $middle + "-" + $bottom;
        $combinations: append($combinations, $combo);
      }
    }
  }
  @return $combinations;
}

// Usage examples:
//
// 1. Generate all layout rules automatically:
// .layout {
//   @include generate-all-grid-layouts();
// }
//
// 2. Generate with custom selector:
// .my-custom-layout {
//   @include generate-all-grid-layouts('.my-custom-layout');
// }
//
// 3. Get combinations list for custom processing:
// $combos: get-all-combinations();
// @each $combo in $combos {
//   .custom.#{$combo} {
//     grid-template-areas: generate-grid-areas($combo);
//   }
// }
//
// 4. Individual combination:
// .layout {
//   &.lhr-lpr-lfr {
//     grid-template-areas: generate-grid-areas('lhr-lpr-lfr');
//   }
// }

// Generate the CSS rules
