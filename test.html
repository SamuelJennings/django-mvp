<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full-Height Container Demo - Cotton Layouts</title>

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Bootstrap 5.3.2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* Demo-specific styles to visualize the solution */
    .demo-navbar {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 60px;
    }

    .sidebar-main {
      background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
      border-right: 2px solid #dee2e6;
    }

    .demo-content-area {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }

    .height-indicator {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 12px;
      z-index: 9999;
    }

    .demo-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* THE KEY CSS - This is what we''ll implement */

    /* Default: Fixed navbar layout */
    .sidebar-layout {
      height: 100vh;
      display: flex;
      overflow: hidden;
    }

    .sidebar-layout>.main-column {
      display: flex;
      flex-direction: column;
      flex: 1;
      overflow: hidden;
      min-width: 0;
      /* Prevent flex item from overflowing */
    }

    .sidebar-layout .navbar {
      flex: 0 0 auto;
      /* Don''t grow or shrink */
    }

    .sidebar-layout .main-content {
      flex: 1 1 auto;
      /* Grow to fill remaining space */
      overflow: auto;
      /* Allow scrolling when content exceeds height */
    }

    /* Variant: Scrollable navbar - navbar scrolls with page content */
    .sidebar-layout.scrollable-navbar>.main-column {
      overflow: auto;
      /* Allow entire column to scroll */
    }

    .sidebar-layout.scrollable-navbar .main-content {
      flex: 1 1 auto;
      overflow: visible;
      /* Don''t create separate scroll container */
    }

    /* Container variants */
    .container-fill {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .container-fill>.scrollable {
      flex: 1 1 auto;
      overflow: auto;
    }

    /* Inner Layout Styles (from _inner-layout.scss) */
    .inner-layout {
      min-height: 0;
    }

    @media (max-width: 991px) {
      .inner-layout {
        flex-direction: column !important;
      }

      .inner-primary,
      .inner-secondary {
        width: 100% !important;
        max-width: none !important;
        border: none !important;
        border-bottom: 1px solid var(--bs-border-color) !important;
      }
    }

    .inner-primary,
    .inner-secondary {
      position: relative;
      transition: all 0.3s ease;
      flex-shrink: 0;
      overflow-y: auto;
      overflow-x: hidden;
      scrollbar-width: thin;
      scrollbar-color: transparent transparent;
    }

    .inner-primary {
      width: var(--inner-primary-width, 250px);
      max-width: var(--inner-primary-max-width, 300px);
      min-width: var(--inner-primary-min-width, 60px);
    }

    .inner-secondary {
      width: var(--inner-secondary-width, 250px);
      max-width: var(--inner-secondary-max-width, 300px);
      min-width: var(--inner-secondary-min-width, 60px);
    }

    .inner-primary::-webkit-scrollbar,
    .inner-secondary::-webkit-scrollbar {
      width: 8px;
    }

    .inner-primary::-webkit-scrollbar-thumb,
    .inner-secondary::-webkit-scrollbar-thumb {
      background: transparent;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .inner-primary:hover::-webkit-scrollbar-thumb,
    .inner-secondary:hover::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.3);
    }

    .inner-primary.collapsed {
      width: var(--inner-primary-min-width, 60px) !important;
      min-width: var(--inner-primary-min-width, 60px) !important;
    }

    .inner-secondary.collapsed {
      width: var(--inner-secondary-min-width, 60px) !important;
      min-width: var(--inner-secondary-min-width, 60px) !important;
    }

    .inner-primary.collapsed .inner-sidebar-content>*:not(.collapsed-only),
    .inner-secondary.collapsed .inner-sidebar-content>*:not(.collapsed-only) {
      display: none;
    }

    .collapsed-only {
      display: none;
    }

    .inner-primary.collapsed .collapsed-only,
    .inner-secondary.collapsed .collapsed-only {
      display: block !important;
    }

    .inner-primary.collapsed .expanded-only,
    .inner-secondary.collapsed .expanded-only {
      display: none !important;
    }

    .inner-main {
      min-width: 0;
    }

    .inner-primary-toggle,
    .inner-secondary-toggle {
      z-index: 10;
      opacity: 0.7;
      transition: opacity 0.2s ease;
    }

    .inner-primary-toggle:hover,
    .inner-secondary-toggle:hover {
      opacity: 1;
    }
  </style>
</head>

<body>

  <!-- Main Layout Structure -->
  <div class="sidebar-layout">

    <!-- Sidebar (optional - can be toggled) -->
    <aside id="sidebar-main" class="sidebar-main p-3" style="width: 280px; flex-shrink: 0;">
      <div class="d-flex align-items-center mb-4">
        <i class="bi bi-grid-3x3-gap-fill fs-3 text-primary me-2"></i>
        <h5 class="mb-0">Cotton Layouts</h5>
      </div>

      <div class="mb-4">
        <h6 class="text-muted text-uppercase small mb-2">Navigation</h6>
        <nav class="nav flex-column">
          <a class="nav-link active" href="#"><i class="bi bi-house-door me-2"></i>Dashboard</a>
          <a class="nav-link" href="#"><i class="bi bi-grid me-2"></i>Products</a>
          <a class="nav-link" href="#"><i class="bi bi-people me-2"></i>Users</a>
          <a class="nav-link" href="#"><i class="bi bi-gear me-2"></i>Settings</a>
        </nav>
      </div>

      <div class="demo-card p-3">
        <h6 class="mb-2">Demo Controls</h6>
        <div class="d-flex flex-column gap-2">
          <button class="btn btn-sm btn-outline-primary" onclick="toggleSidebar()">
            <i class="bi bi-layout-sidebar-inset"></i> Toggle Sidebar
          </button>
          <button class="btn btn-sm btn-outline-primary" onclick="toggleNavbarScroll()">
            <i class="bi bi-arrows-vertical"></i> <span id="navbar-mode-text">Navbar Scrolls</span>
          </button>
          <button class="btn btn-sm btn-outline-primary" onclick="toggleNavbarSize()">
            <i class="bi bi-arrows-expand"></i> Navbar Size
          </button>
          <button class="btn btn-sm btn-outline-primary" onclick="addContent()">
            <i class="bi bi-plus-circle"></i> Add Content
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Column (navbar + content) -->
    <div class="main-column">

      <!-- Navbar - Fixed height, doesn''t scroll -->
      <nav id="demo-navbar" class="navbar demo-navbar px-4">
        <div class="container-fluid">
          <span class="navbar-brand mb-0 h1">
            <i class="bi bi-layout-text-window-reverse me-2"></i>
            Full-Height Container Demo
          </span>
          <div class="d-flex gap-2">
            <button class="btn btn-light btn-sm">
              <i class="bi bi-bell"></i>
            </button>
            <button class="btn btn-light btn-sm">
              <i class="bi bi-person-circle"></i>
            </button>
          </div>
        </div>
      </nav>

      <!-- Main Content - Scrollable, fills remaining height -->
      <main id="main-content" class="main-content">
        <div class="container-fluid p-4">

          <!-- Header Section -->
          <div class="mb-4">
            <h1 class="display-5 mb-2">Full-Height Container Solution</h1>
            <p class="lead text-muted">
              This demo shows how flexbox automatically fills viewport height minus navbar,
              with no JavaScript required for height calculations.
            </p>
          </div>

          <!-- Key Features -->
          <div class="row g-4 mb-4">
            <div class="col-md-4">
              <div class="demo-card p-4">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-primary text-white rounded-circle p-3 me-3">
                    <i class="bi bi-aspect-ratio fs-4"></i>
                  </div>
                  <h5 class="mb-0">Auto Height</h5>
                </div>
                <p class="text-muted mb-0">
                  Content area automatically fills remaining viewport height, regardless of navbar size.
                </p>
              </div>
            </div>

            <div class="col-md-4">
              <div class="demo-card p-4">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-success text-white rounded-circle p-3 me-3">
                    <i class="bi bi-arrows-move fs-4"></i>
                  </div>
                  <h5 class="mb-0">Flexible</h5>
                </div>
                <p class="text-muted mb-0">
                  Navbar can change height dynamically (responsive, multi-line) and layout adapts automatically.
                </p>
              </div>
            </div>

            <div class="col-md-4">
              <div class="demo-card p-4">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-info text-white rounded-circle p-3 me-3">
                    <i class="bi bi-code-slash fs-4"></i>
                  </div>
                  <h5 class="mb-0">Pure CSS</h5>
                </div>
                <p class="text-muted mb-0">
                  No JavaScript needed for height calculations. Better performance and simpler code.
                </p>
              </div>
            </div>
          </div>

          <!-- Implementation Details -->
          <div class="demo-card p-4 mb-4">
            <h3 class="mb-3">How It Works</h3>
            <div class="row">
              <div class="col-lg-6 mb-3">
                <h5><i class="bi bi-1-circle-fill text-primary me-2"></i>Container Setup</h5>
                <pre class="bg-light p-3 rounded"><code>.sidebar-layout {
  height: 100vh;
  display: flex;
  overflow: hidden;
}</code></pre>
              </div>

              <div class="col-lg-6 mb-3">
                <h5><i class="bi bi-2-circle-fill text-primary me-2"></i>Main Column Flex</h5>
                <pre class="bg-light p-3 rounded"><code>.main-column {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}</code></pre>
              </div>

              <div class="col-lg-6 mb-3">
                <h5><i class="bi bi-3-circle-fill text-primary me-2"></i>Navbar (Fixed)</h5>
                <pre class="bg-light p-3 rounded"><code>.navbar {
  flex: 0 0 auto;
  /* Won''t grow or shrink */
}</code></pre>
              </div>

              <div class="col-lg-6 mb-3">
                <h5><i class="bi bi-4-circle-fill text-primary me-2"></i>Content (Fill)</h5>
                <pre class="bg-light p-3 rounded"><code>.main-content {
  flex: 1 1 auto;
  overflow: auto;
  /* Fills remaining space */
}</code></pre>
              </div>
            </div>
          </div>

          <!-- Layout Variants -->
          <div class="demo-card p-4 mb-4">
            <h3 class="mb-3">Layout Variants</h3>
            <div class="row">
              <div class="col-md-6 mb-3">
                <h5><i class="bi bi-pin-fill text-primary me-2"></i>Fixed Navbar (Default)</h5>
                <p class="text-muted">Navbar stays at top, content scrolls independently below it.</p>
                <ul class="small">
                  <li>Best for: Dashboards, applications with persistent navigation</li>
                  <li>Navbar always visible</li>
                  <li>Content area has its own scrollbar</li>
                </ul>
              </div>
              <div class="col-md-6 mb-3">
                <h5><i class="bi bi-arrows-vertical text-success me-2"></i>Scrollable Navbar</h5>
                <p class="text-muted">Navbar scrolls with page content, traditional website behavior.</p>
                <ul class="small">
                  <li>Best for: Content-heavy pages, marketing sites</li>
                  <li>Navbar scrolls off-screen with content</li>
                  <li>Single scrollbar for entire page</li>
                </ul>
              </div>
            </div>
            <div class="alert alert-info mb-0">
              <i class="bi bi-lightbulb me-2"></i>
              <strong>Try it:</strong> Click "Navbar Scrolls" in the sidebar to switch between modes!
            </div>
          </div>

          <!-- Benefits -->
          <div class="demo-card p-4 mb-4">
            <h3 class="mb-3">Benefits vs Alternatives</h3>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>Approach</th>
                    <th>Adapts to Navbar</th>
                    <th>JavaScript Required</th>
                    <th>Browser Support</th>
                    <th>Complexity</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="table-success">
                    <td><strong>Flexbox (This Demo)</strong></td>
                    <td><i class="bi bi-check-circle-fill text-success"></i> Automatic</td>
                    <td><i class="bi bi-x-circle-fill text-success"></i> None</td>
                    <td><i class="bi bi-check-circle-fill text-success"></i> Excellent</td>
                    <td><i class="bi bi-check-circle-fill text-success"></i> Low</td>
                  </tr>
                  <tr>
                    <td>calc(100vh - 60px)</td>
                    <td><i class="bi bi-x-circle-fill text-danger"></i> Hard-coded</td>
                    <td><i class="bi bi-x-circle-fill text-success"></i> None</td>
                    <td><i class="bi bi-check-circle-fill text-success"></i> Excellent</td>
                    <td><i class="bi bi-dash-circle-fill text-warning"></i> Medium</td>
                  </tr>
                  <tr>
                    <td>JS + CSS Variables</td>
                    <td><i class="bi bi-check-circle-fill text-success"></i> Dynamic</td>
                    <td><i class="bi bi-check-circle-fill text-danger"></i> Required</td>
                    <td><i class="bi bi-dash-circle-fill text-warning"></i> Good</td>
                    <td><i class="bi bi-check-circle-fill text-danger"></i> High</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Inner Layout Demo -->
          <div class="demo-card p-4 mb-4">
            <h3 class="mb-3">Inner Layout Component Demo</h3>
            <p class="text-muted mb-4">
              This demonstrates the <code>&lt;c-layouts.inner&gt;</code> component with collapsible primary (left) and
              secondary (right) sidebars.
              State persists independently across page reloads.
            </p>

            <!-- Inner layout with dual sidebars -->
            <div class="inner-layout d-flex gap-3 border rounded p-3" style="min-height: 500px; background: #f8f9fa;">

              <!-- Primary (left) sidebar -->
              <aside class="inner-primary border-end bg-white rounded" data-collapsible="True"
                style="--inner-primary-width: 220px; --inner-primary-max-width: 280px; --inner-primary-min-width: 60px;">
                <button class="inner-primary-toggle btn btn-sm btn-light position-absolute top-0 end-0 m-2"
                  type="button" aria-label="Toggle primary sidebar">
                  <i class="bi bi-chevron-left expanded-only"></i>
                  <i class="bi bi-chevron-right collapsed-only"></i>
                </button>
                <div class="inner-sidebar-content p-3">
                  <div class="mb-3">
                    <h6 class="text-muted text-uppercase small mb-2">Primary Sidebar</h6>
                    <p class="small mb-3">This is the left sidebar. It can be collapsed independently.</p>
                  </div>

                  <div class="mb-3">
                    <h6 class="small fw-bold">Navigation</h6>
                    <nav class="nav flex-column">
                      <a class="nav-link p-1 small" href="#"><i class="bi bi-house-door me-2"></i>Dashboard</a>
                      <a class="nav-link p-1 small" href="#"><i class="bi bi-folder me-2"></i>Projects</a>
                      <a class="nav-link p-1 small" href="#"><i class="bi bi-file-text me-2"></i>Documents</a>
                      <a class="nav-link p-1 small" href="#"><i class="bi bi-gear me-2"></i>Settings</a>
                    </nav>
                  </div>

                  <div class="collapsed-only text-center">
                    <i class="bi bi-layout-sidebar fs-3 text-muted"></i>
                  </div>
                </div>
              </aside>

              <!-- Main content -->
              <div class="inner-main flex-grow-1 overflow-auto bg-white rounded p-3">
                <h4>Main Content Area</h4>
                <p>This is the main content area that grows to fill available space between the sidebars.</p>

                <div class="alert alert-info">
                  <i class="bi bi-info-circle me-2"></i>
                  <strong>Try it:</strong> Click the chevron buttons in the sidebars to collapse/expand them.
                  State persists via localStorage!
                </div>

                <h5 class="mt-4">Features</h5>
                <ul>
                  <li><strong>Independent State:</strong> Each sidebar has its own collapse state</li>
                  <li><strong>Persistent:</strong> State survives page reloads via localStorage</li>
                  <li><strong>Responsive:</strong> Stacks vertically on mobile (&lt;992px)</li>
                  <li><strong>Configurable:</strong> Width, max-width, min-width via CSS variables</li>
                  <li><strong>Smooth Transitions:</strong> 0.3s ease animation</li>
                </ul>

                <h5 class="mt-4">Configuration Example</h5>
                <pre class="bg-light p-3 rounded small"><code>&lt;c-layouts.inner 
  :primary_collapsible="True"
  :secondary_collapsible="True"
  primary_width="220px"
  secondary_width="200px"
  gap="3"&gt;
  
  &lt;c-slot name="primary"&gt;
    Left sidebar content
  &lt;/c-slot&gt;
  
  &lt;c-slot name="secondary"&gt;
    Right sidebar content
  &lt;/c-slot&gt;
  
  Main content goes here
&lt;/c-layouts.inner&gt;</code></pre>
              </div>

              <!-- Secondary (right) sidebar -->
              <aside class="inner-secondary border-start bg-white rounded" data-collapsible="True"
                style="--inner-secondary-width: 200px; --inner-secondary-max-width: 250px; --inner-secondary-min-width: 60px;">
                <button class="inner-secondary-toggle btn btn-sm btn-light position-absolute top-0 start-0 m-2"
                  type="button" aria-label="Toggle secondary sidebar">
                  <i class="bi bi-chevron-right expanded-only"></i>
                  <i class="bi bi-chevron-left collapsed-only"></i>
                </button>
                <div class="inner-sidebar-content p-3">
                  <div class="mb-3">
                    <h6 class="text-muted text-uppercase small mb-2">Secondary Sidebar</h6>
                    <p class="small mb-3">This is the right sidebar for metadata or related content.</p>
                  </div>

                  <div class="mb-3">
                    <h6 class="small fw-bold">Properties</h6>
                    <dl class="row small mb-0">
                      <dt class="col-sm-5">Width:</dt>
                      <dd class="col-sm-7">200px</dd>
                      <dt class="col-sm-5">Collapsed:</dt>
                      <dd class="col-sm-7">60px</dd>
                      <dt class="col-sm-5">Transition:</dt>
                      <dd class="col-sm-7">0.3s ease</dd>
                    </dl>
                  </div>

                  <div class="mb-3">
                    <h6 class="small fw-bold">Quick Stats</h6>
                    <div class="d-flex flex-column gap-2">
                      <div class="bg-light p-2 rounded small">
                        <i class="bi bi-file-text text-primary me-2"></i>
                        <span>12 items</span>
                      </div>
                      <div class="bg-light p-2 rounded small">
                        <i class="bi bi-clock text-success me-2"></i>
                        <span>Last updated</span>
                      </div>
                    </div>
                  </div>

                  <div class="collapsed-only text-center">
                    <i class="bi bi-info-circle fs-3 text-muted"></i>
                  </div>
                </div>
              </aside>

            </div>
          </div>

          <!-- Test Content -->
          <div id="dynamic-content">
            <div class="demo-card p-4 mb-4">
              <h3 class="mb-3">Test Scrolling</h3>
              <p>
                This section demonstrates that the content area scrolls independently.
                Try clicking "Add Content" in the sidebar to see how scrolling works when content exceeds viewport
                height.
              </p>
              <div class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>
                Notice how the navbar stays fixed at the top while this content scrolls.
              </div>
            </div>
          </div>

        </div>
      </main>

    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Update height indicators
    function updateHeightIndicators() {
      const viewportHeight = window.innerHeight
      const navbar = document.getElementById('demo-navbar')
      const content = document.getElementById('main-content')

      document.getElementById('viewport-height').textContent = viewportHeight + 'px'
      document.getElementById('navbar-height').textContent = navbar.offsetHeight + 'px'
      document.getElementById('content-height').textContent = content.offsetHeight + 'px'
    }

    // Toggle sidebar visibility
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar-main')
      if (sidebar.style.display === 'none') {
        sidebar.style.display = 'block'
      } else {
        sidebar.style.display = 'none'
      }
      setTimeout(updateHeightIndicators, 100)
    }

    // Toggle navbar scroll mode
    function toggleNavbarScroll() {
      const layout = document.querySelector('.sidebar-layout')
      const buttonText = document.getElementById('navbar-mode-text')

      if (layout.classList.contains('scrollable-navbar')) {
        layout.classList.remove('scrollable-navbar')
        buttonText.textContent = 'Navbar Scrolls'
      } else {
        layout.classList.add('scrollable-navbar')
        buttonText.textContent = 'Navbar Fixed'
      }
      setTimeout(updateHeightIndicators, 100)
    }

    // Toggle navbar size (simulates multi-line or responsive changes)
    let navbarExpanded = false
    function toggleNavbarSize() {
      const navbar = document.getElementById('demo-navbar')
      if (navbarExpanded) {
        navbar.style.minHeight = '60px'
        navbarExpanded = false
      } else {
        navbar.style.minHeight = '120px'
        navbarExpanded = true
      }
      setTimeout(updateHeightIndicators, 100)
    }

    // Add content dynamically
    let contentCount = 0
    function addContent() {
      contentCount++
      const container = document.getElementById('dynamic-content')
      const newCard = document.createElement('div')
      newCard.className = 'demo-card p-4 mb-4'
      newCard.innerHTML = `
        <h4>Dynamic Content Block #${contentCount}</h4>
        <p class="text-muted">
          This content was added dynamically to demonstrate scrolling behavior. 
          The content area grows and becomes scrollable, while the navbar remains fixed.
        </p>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
          incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
          exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        </p>
      `
      container.appendChild(newCard)
    }

    // // Initialize
    // updateHeightIndicators()
    // window.addEventListener('resize', updateHeightIndicators)

    // Update on scroll to show content scrolling
    document.getElementById('main-content').addEventListener('scroll', function () {
      // Visual feedback that content is scrolling independently
    });

    // Inner Layout JavaScript (from inner_layout.js)
    (function () {
      'use strict'

      const STORAGE_KEY_PRIMARY = 'innerPrimaryCollapsed'
      const STORAGE_KEY_SECONDARY = 'innerSecondaryCollapsed'

      function saveState(key, isCollapsed) {
        try {
          localStorage.setItem(key, isCollapsed.toString())
        } catch (e) {
          console.warn('Failed to save inner layout state:', e)
        }
      }

      function getState(key) {
        try {
          return localStorage.getItem(key) === 'true'
        } catch (e) {
          return false
        }
      }

      function restoreSidebarState(sidebar, storageKey) {
        const isCollapsed = getState(storageKey)

        if (isCollapsed) {
          sidebar.style.transition = 'none'
          sidebar.classList.add('collapsed')
          sidebar.offsetHeight
          requestAnimationFrame(() => {
            sidebar.style.transition = ''
          })
        }
      }

      function toggleSidebar(sidebar, storageKey) {
        sidebar.classList.toggle('collapsed')
        const isCollapsed = sidebar.classList.contains('collapsed')
        saveState(storageKey, isCollapsed)
      }

      function initPrimarySidebars() {
        const sidebars = document.querySelectorAll('.inner-primary[data-collapsible="True"]')

        sidebars.forEach(sidebar => {
          restoreSidebarState(sidebar, STORAGE_KEY_PRIMARY)

          const toggleButton = sidebar.querySelector('.inner-primary-toggle')
          if (toggleButton) {
            toggleButton.addEventListener('click', (e) => {
              e.preventDefault()
              e.stopPropagation()
              toggleSidebar(sidebar, STORAGE_KEY_PRIMARY)
            })
          }
        })
      }

      function initSecondarySidebars() {
        const sidebars = document.querySelectorAll('.inner-secondary[data-collapsible="True"]')

        sidebars.forEach(sidebar => {
          restoreSidebarState(sidebar, STORAGE_KEY_SECONDARY)

          const toggleButton = sidebar.querySelector('.inner-secondary-toggle')
          if (toggleButton) {
            toggleButton.addEventListener('click', (e) => {
              e.preventDefault()
              e.stopPropagation()
              toggleSidebar(sidebar, STORAGE_KEY_SECONDARY)
            })
          }
        })
      }

      // Initialize
      initPrimarySidebars()
      initSecondarySidebars()
    })();
  </script>

</body>

</html>