{% load i18n widget_tweaks %}

<c-vars search_field="" />
<!-- Desktop Search Form -->
{% if search_field %}
  <div class="desktop-search d-none d-md-block">
    <form method="get" action="" class="mb-0">
      <div class="input-group"
           style="min-width: 250px;
                  max-width: 300px">
        <span class="input-group-text border-end-0 bg-white">
          <c-icon name="search" />
        </span>
        {% render_field search_field class="form-control border-start-0 ps-0" placeholder="Search records..." form="" %}
      </div>
    </form>
  </div>
{% endif %}
<!-- Mobile Search Toggle and Drawer -->
<div class="mobile-search d-md-none">
  <!-- Search Toggle Button -->
  <button class="btn btn-outline-secondary btn-sm"
          type="button"
          onclick="toggleSearchDrawer()">
    <c-icon name="search" />
  </button>
  <!-- Mobile Search Drawer -->
  <div id="searchDrawer" class="search-drawer">
    <form method="get" action="" class="d-flex gap-2">
      <div class="input-group flex-grow-1">
        <span class="input-group-text border-end-0 bg-white">
          <c-icon name="search" />
        </span>
        {% if search_field %}
          {% render_field search_field class="form-control border-start-0 ps-0" placeholder="Search records..." form="" %}
        {% else %}
          <input type="text"
                 name="search"
                 class="form-control border-start-0 ps-0"
                 placeholder="Search records..."
                 value="{{ request.GET.search|default:'' }}" />
        {% endif %}
      </div>
      <button class="btn btn-outline-secondary btn-sm"
              type="button"
              onclick="toggleSearchDrawer()">
        <c-icon name="close" />
      </button>
    </form>
  </div>
</div>
